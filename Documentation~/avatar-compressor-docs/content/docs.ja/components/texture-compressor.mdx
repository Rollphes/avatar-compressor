---
title: Texture Compressor
description: 複雑さに応じたテクスチャ圧縮コンポーネント
---

Texture Compressor は、アバターのテクスチャを分析し、その複雑さに基づいて圧縮します。複雑なテクスチャ（詳細なパターン、テキスト）は軽い圧縮を、シンプルなテクスチャ（単色、グラデーション）は強い圧縮を受けます。

<div style={{ display: "flex", justifyContent: "center" }}>
  <img
    src="/img/components/texture-compressor.webp"
    alt="Texture Compressor コンポーネント"
    width={300}
  />
</div>

## 使用方法

<Steps>
<Step>
### コンポーネントを追加

1. アバターのルート GameObject（VRC Avatar Descriptor があるもの）を選択
2. Inspector で**Add Component**をクリック
3. **Avatar Compressor > LAC Texture Compressor**に移動、または「Texture Compressor」で検索

</Step>
<Step>

### プリセットを選択

ニーズに合ったプリセットを選択します。

<Callout type="info">
ほとんどのアバターには**Balanced**をお勧めします。
</Callout>
</Step>
<Step>
### アバターをビルド

VRChat SDK から通常通りアバターをビルドします。コンポーネントは自動的に：

1. アバター内のすべてのテクスチャを分析
2. 複雑さに基づいて各テクスチャの圧縮レベルを計算
3. 圧縮コピーを作成（元のファイルは変更されません）
4. 圧縮テクスチャを使用するようマテリアルを更新

</Step>
</Steps>

## プリセット

<Tabs items={['HighQuality', 'Quality', 'Balanced', 'Aggressive', 'Maximum', 'Custom']}>
<Tab value="HighQuality">
**ショーケースアバター向けの最小圧縮。**

| 設定       | 値             |
| ---------- | -------------- |
| 除数範囲   | 1x - 2x        |
| 解像度範囲 | 256px - 2048px |

視覚的品質が最優先のアバターに最適です。

</Tab>
<Tab value="Quality">
**視覚的品質を優先しつつ、適度な圧縮を許容。**

| 設定       | 値             |
| ---------- | -------------- |
| 除数範囲   | 1x - 4x        |
| 解像度範囲 | 128px - 2048px |

品質を維持しながらファイルサイズを削減したい PC アバターに適しています。

</Tab>
<Tab value="Balanced">
**品質とファイルサイズのバランスが良い。（推奨）**

| 設定       | 値            |
| ---------- | ------------- |
| 除数範囲   | 1x - 8x       |
| 解像度範囲 | 64px - 2048px |

ほとんどのアバターに推奨。良好な視覚的品質を維持しながら、大幅なファイルサイズ削減を提供します。

</Tab>
<Tab value="Aggressive">
**QuestアバターやVRAM制限向けの強い圧縮。**

| 設定       | 値            |
| ---------- | ------------- |
| 除数範囲   | 2x - 8x       |
| 解像度範囲 | 32px - 2048px |

Quest アバターや VRAM 使用量を大幅に削減する必要がある場合に使用します。

</Tab>
<Tab value="Maximum">
**最大のファイルサイズ削減。**

| 設定       | 値            |
| ---------- | ------------- |
| 除数範囲   | 2x - 16x      |
| 解像度範囲 | 32px - 2048px |

<Callout type="warn">
  このプリセットは視覚的品質に顕著な影響を与える可能性があります。
</Callout>

ファイルサイズが重要な場合に使用します。

</Tab>
<Tab value="Custom">
**すべての設定を完全に制御。**

Custom を選択すると、すべての設定が編集可能になります。下記の[詳細設定](#詳細設定)を参照してください。

</Tab>
</Tabs>

## テクスチャフィルター

処理するテクスチャタイプを制御：

| フィルター                 | 説明                                                  |
| -------------------------- | ----------------------------------------------------- |
| **Process Main Textures**  | カラー/アルベドテクスチャ（`_MainTex`、`_BaseMap`等） |
| **Process Normal Maps**    | ノーマル/バンプマップ（`_BumpMap`、`_NormalMap`等）   |
| **Process Emission Maps**  | エミッションテクスチャ（`_EmissionMap`等）            |
| **Process Other Textures** | メタリック、ラフネス、その他のテクスチャ              |

### サイズフィルター

| フィルター               | 説明                                                   |
| ------------------------ | ------------------------------------------------------ |
| **Min Source Size**      | このサイズより大きいテクスチャのみ処理（ピクセル単位） |
| **Skip If Smaller Than** | このサイズ以下のテクスチャをスキップ（ピクセル単位）   |

<Callout type="info">
  これら2つのフィルターは連携して動作します。例えば、Min Source Size = 256、Skip
  If Smaller Than =
  128の場合、256px未満のテクスチャは処理から除外され、128px以下のテクスチャは完全にスキップされます。
</Callout>

## プレビュー

Inspector で**Preview Compression Results**をクリックすると、ビルド前に圧縮分析を確認できます。

### サマリー

プレビューには合計サイズの統計が表示されます：

| メトリック   | 説明                                 |
| ------------ | ------------------------------------ |
| **Original** | すべてのテクスチャの非圧縮合計サイズ |
| **After**    | 圧縮後の推定サイズ                   |
| **Savings**  | 削減されたパーセンテージとバイト数   |

### テクスチャリスト

各テクスチャについて、プレビューには以下が表示されます：

- **テクスチャ名とタイプ**（Main、Normal、Emission、Other）
- **複雑さスコア**（0.0 - 1.0）と視覚的なプログレスバー
- **サイズ変更** - 元の解像度 → 推奨解像度（除数付き）

### 複雑さスコアの解釈

| スコア    | レベル     | 圧縮             |
| --------- | ---------- | ---------------- |
| < 0.2     | 非常に低い | 強い圧縮を適用   |
| 0.2 - 0.4 | 低い       | 圧縮に適している |
| 0.4 - 0.6 | 中程度     | 適度な圧縮       |
| 0.6 - 0.8 | 高い       | 軽い圧縮のみ     |
| ≥ 0.8     | 非常に高い | 最小限の圧縮     |

### スキップされたテクスチャ

処理されないテクスチャは、スキップ理由とともに別途表示されます：

- **Too small**: テクスチャが最小サイズしきい値より小さい
- **Filtered by type**: テクスチャタイプがフィルターで無効化されている

<Callout type="info">
  プレビューは自動的に更新されません。プレビュー生成後に設定を変更した場合、ボタンを再度クリックして更新するよう警告が表示されます。
</Callout>

## 詳細設定

<Callout>
  これらの設定は**Custom**プリセットを使用している場合に利用可能です。
</Callout>

<Accordions>
<Accordion title="分析戦略">
分析戦略は、テクスチャの複雑さの計算方法を決定します。

| 戦略             | 説明                                                       | 最適な用途        |
| ---------------- | ---------------------------------------------------------- | ----------------- |
| **Fast**         | グラデーション、空間周波数、色分散を使用した高速分析       | 高速ビルド、Quest |
| **HighAccuracy** | DCT と GLCM を使用した詳細分析                             | 品質重視          |
| **Perceptual**   | ブロック分散とエッジ密度を使用した人間の知覚に合わせた分析 | 一般的な使用      |
| **Combined**     | すべての戦略の重み付け組み合わせ                           | 最も正確          |

**Combined**戦略を使用する場合、各サブ戦略の重みを調整できます：

| 重み                     | デフォルト | 説明                       |
| ------------------------ | ---------- | -------------------------- |
| **Fast Weight**          | 0.3        | Fast 戦略の寄与度          |
| **High Accuracy Weight** | 0.5        | High Accuracy 戦略の寄与度 |
| **Perceptual Weight**    | 0.2        | Perceptual 戦略の寄与度    |

</Accordion>
<Accordion title="複雑さしきい値">
| 設定 | 説明 |
| ---- | ---- |
| **High Complexity Threshold** | これより上のテクスチャは最小限の圧縮を受ける |
| **Low Complexity Threshold** | これより下のテクスチャは最大の圧縮を受ける |

これらのしきい値の間のテクスチャは、補間された圧縮を受けます。

</Accordion>
<Accordion title="解像度設定">
| 設定 | 説明 |
| ---- | ---- |
| **Min Divisor** | 最小スケール係数（1 = 縮小なし） |
| **Max Divisor** | 最大スケール係数（8 = 1/8サイズ） |
| **Min Resolution** | テクスチャはこれより小さくスケールされない |
| **Max Resolution** | テクスチャはこれを超えない |
</Accordion>
<Accordion title="特殊テクスチャ処理">
- **ノーマルマップ**: 色の複雑さではなく、法線ベクトルの変化を使用して分析
- **エミッションマップ**: エミッション固有の処理のため、複雑さスコアを10%調整
- **スパーステクスチャ**: 透明ピクセルが多いテクスチャ（不透明ピクセルが100未満）は、効率的な処理のため低い複雑さスコアを受ける
</Accordion>
<Accordion title="2のべき乗">
- **Force Power of Two**: 有効時（デフォルト）、出力寸法は2のべき乗に強制されます（例：256、512、1024）。GPUメモリ使用の最適化に推奨されます。
</Accordion>
<Accordion title="デバッグ">
- **Enable Logging**: 有効時（デフォルト）、ビルド中にUnityコンソールに圧縮の詳細がログ出力されます。デバッグや圧縮結果の確認に便利です。
</Accordion>
</Accordions>

## 互換性

<Callout type="info">
  Texture CompressorはNDMF Transformingフェーズ中に実行され、Modular
  AvatarやAvatar
  Optimizerの前に動作します。これにより、他のツールがアバターを処理する前にテクスチャが圧縮されます。
</Callout>
